//
//  AppUtil.m
//  QianFangGuJie
//  此类中实现一些工具方法
//  Created by  rjt on 15/9/14.
//  Copyright © 2015年 JYZD. All rights reserved.
//

#import "AppUtil.h"
#import "IndexViewController.h"
#import "WpCommonFunction.h"

@implementation AppUtil


+(void)exitAccount:(BOOL)animated{
    [getUserInfoManager removeUser];
    [self switchIndex:animated];
//    [[PasswordWindow shareWindow] showWithLogin];
}

+(void)exitAccountGo2Forget:(BOOL)animated{
    [getUserInfoManager removeUser];
    [self switchIndex:animated];
    [[PasswordWindow shareWindow] showWithForget];
}

+(void)switchIndex:(BOOL)animated{
    kShareAppDelegate.navBarStatus = YES;
    kShareAppDelegate.statusBarStyle = UIStatusBarStyleLightContent;
    kShareAppDelegate.nav.navigationBarHidden = YES;
    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleLightContent];
    for (MyViewController* e in [kShareAppDelegate.nav childViewControllers]) {
        if ([e isMemberOfClass:[IndexViewController class]]) {
            [e.navigationController popToViewController:e animated:animated];
            IndexViewController *ctrl = (IndexViewController*)e;
            [ctrl go2Home:animated];
            return;
        }
    }
    IndexViewController* controller = [[IndexViewController alloc]initWithNibName:@"IndexViewController" bundle:nil];
    [kShareAppDelegate.nav pushViewController:controller animated:animated];
}



+(IndexViewController*)findIndex{
    kShareAppDelegate.navBarStatus = YES;
    kShareAppDelegate.statusBarStyle = UIStatusBarStyleLightContent;
    kShareAppDelegate.nav.navigationBarHidden = YES;
    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleLightContent];
    for (MyViewController* e in [kShareAppDelegate.nav childViewControllers]) {
        if ([e isMemberOfClass:[IndexViewController class]]) {
            IndexViewController *ctrl = (IndexViewController*)e;
            return ctrl;
        }
    }
    return nil;
}

+(BOOL)isNobleMetalDay{
    NSDate * date = [[NSDate alloc] init];
    NSDateFormatter * f = [[NSDateFormatter alloc] init];
    [f setDateFormat:@"HH:mm"];
    if ([WpCommonFunction isTime:[f stringFromDate:date] between:@"08:55" and:@"20:55"]) {
        return YES;
    }
    return NO;
}

+(BOOL)isNobleMetalNight{
    return ![self isNobleMetalDay];
}

+(UIColor*)colorWithOpen:(float)open andNew:(float)now{
    if (open > now && now > 0) {
        return Color_Down_Green;
    }else if(now > open ){
        return Color_Up_Red;
    }else{
        return Color_Bg_Gray;
    }
}

+(UIColor*)colorWithProfit:(float)profit{
    if (profit < 0) {
        return Color_Down_Green;
    }else{
        return Color_Up_Red;
    }
}

//+(NSString*)price:(NSString*)price withCode:(NSString*)code{
//    TPZManager *manager = [TPZManager getProductByKey:code];
//    if (manager.productEntity.decimal) {
//        return [NSString stringWithFormat:([NSString stringWithFormat:@"%%.%@f",manager.productEntity.decimal]),[price floatValue]];
//    }else{
//        return [NSString stringWithFormat:@"%.2f",[price floatValue]];
//    }
//}

+(NSString*)price:(NSString*)price{
    return [NSString stringWithFormat:@"%.2f",[price floatValue]];
}

+(UIImage *)imageWithColor:(UIColor *)color andSize:(CGSize)imageSize{
    UIGraphicsBeginImageContextWithOptions(imageSize, 0, [UIScreen mainScreen].scale);
    [color set];
    UIRectFill(CGRectMake(0, 0, imageSize.width, imageSize.height));
    UIImage *pressedColorImg = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return pressedColorImg;
}

@end
