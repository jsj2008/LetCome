//
//  StrategyCooperationViewController.m
//  STO
//
//  Created by admin on 16/4/29.
//  Copyright © 2016年 JYZD. All rights reserved.
//

#import "StrategyCooperationViewController.h"
#import "SetListSection.h"
#import "MyWebViewController.h"

@interface StrategyCooperationViewController ()

@end

@implementation StrategyCooperationViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    self.title = @"投资人合作协议";
}

-(void)initQuickUI
{
    self.pAdaptor = [QUFlatAdaptor adaptorWithTableView:self.myTable nibArray:@[@"SetListSection",@"AppFlatEmptySection"] delegate:self];
    [self getData];
}


- (void)getData
{
    DEFINED_WEAK_SELF
    [[ProductsManager shareProductsManager] getArticleSamplelistInfo:^(ReturnValue *val, QUMock *mock, QUEntity *entity) {
        
        if (val.result && [entity isKindOfClass:[ArticleSampleListEntity class]]) {
            
            if (((ArticleSampleListEntity *)entity).list.count != 0) {
                
                QUEntity *empty = [QUEntity entityWithLine:QU_FLAT_COLOR_LINE];
                [_self.pAdaptor.pSources addEntity:empty withSection:[SetEmptyListSection class]];

                for (ArticleSampleListListEntity *e in ((ArticleSampleListEntity *)entity).list) {
                    
                    e.selectionStyle = UITableViewCellSelectionStyleGray;
                    e.lineBottomColor = QU_FLAT_COLOR_LINE;
                    e.pIndentBottomLevel = 1;
                    e.selectedBgColor = QU_FLAT_COLOR_CELL_BG_SELECTED;
                    [_self.pAdaptor.pSources addEntity:e withSection:[SetSimpleListSection class]];
                }
            }
        }
        
        [self.pAdaptor notifyChanged];
    }];
}

-(void)QUAdaptor:(QUAdaptor *)adaptor forSection:(QUSection *)section forEntity:(QUEntity *)entity
{
    if ([section isKindOfClass:[SetSimpleListSection class]] && [entity isKindOfClass:[ArticleSampleListListEntity class]]) {
        
        SetSimpleListSection *s = (SetSimpleListSection *)section;
        ArticleSampleListListEntity *e = (ArticleSampleListListEntity *)entity;
    
        s.title.text = e.name;
        s.lblContent.hidden = YES;
    }
}

-(void)QUAdaptor:(QUAdaptor *)adaptor selectedSection:(QUSection *)section entity:(QUEntity *)entity
{
    ArticleSampleListListEntity *e = (ArticleSampleListListEntity *)entity;
    
    MyWebViewController *controller = [[MyWebViewController alloc] initWithNibName:@"MyWebViewController" bundle:nil];
    controller.title = @"投资人合作协议内容";
    
    controller.url = [NSString stringWithFormat:@"%@/agreement/getAgreementInfo?id=%@", [ConfigManager shareConfigManager].h5Url, e.ID];
    
    [self.navigationController pushViewController:controller animated:YES];
}


- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

/*
#pragma mark - Navigation

// In a storyboard-based application, you will often want to do a little preparation before navigation
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    // Get the new view controller using [segue destinationViewController].
    // Pass the selected object to the new view controller.
}
*/

@end
