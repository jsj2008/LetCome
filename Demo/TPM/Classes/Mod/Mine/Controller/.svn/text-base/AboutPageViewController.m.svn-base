//
//  AboutPageViewController.m
//  QianFangGuJie
//
//  Created by 李荣 on 15/3/30.
//  Copyright (c) 2015年 余龙. All rights reserved.
//

#import "AboutPageViewController.h"
#import "LimitListSection.h"
#import "setListEntity.h"
#import "MyWebViewController.h"
#import "IntroViewController.h"
#import "StrategyCooperationViewController.h"
#import "SetListSection.h"
@interface AboutPageViewController ()
@property (weak, nonatomic) IBOutlet UILabel *versionLable;

@end

@implementation AboutPageViewController

- (void)viewDidLoad {
    self.title = @"关于";
    self.versionLable.text = [NSString stringWithFormat:@"策略梦工厂 %@",VERSION];
    self.imgIcon.layer.masksToBounds = YES;
    self.imgIcon.layer.cornerRadius=10.0;
    
    [super viewDidLoad];
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
-(void)initQuickUI{
    self.pAdaptor = [QUFlatAdaptor adaptorWithTableView:self.pTableView nibArray:@[@"LimitListSection",@"SetListSection"] delegate:self];
    SetListEntity *entity1 = [SetListEntity entity];
    entity1.sectionList = @"平台服务协议";
    entity1.selectedBgColor = QU_FLAT_COLOR_CELL_BG_SELECTED;
    entity1.tag = 1;
    entity1.pIndentBottomLevel = 1;
    entity1.lineBottomColor = QU_FLAT_COLOR_LINE;
    entity1.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    [self.pAdaptor.pSources addEntity:entity1 withSection:[LimitListSection class]];
    
    SetListEntity *entity2 = [SetListEntity entity];
    entity2.sectionList = @"投资人合作协议";
    entity2.selectedBgColor = QU_FLAT_COLOR_CELL_BG_SELECTED;
    entity2.tag = 2;
    entity2.pIndentBottomLevel = 1;
    entity2.lineBottomColor = QU_FLAT_COLOR_LINE;
    entity2.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    [self.pAdaptor.pSources addEntity:entity2 withSection:[LimitListSection class]];
    
    SetListEntity* entity3 = [SetListEntity entity];
    entity3.sectionList = @"隐私条款";
    entity3.selectedBgColor = QU_FLAT_COLOR_CELL_BG_SELECTED;
    entity3.tag = 3;
    entity3.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    [self.pAdaptor.pSources addEntity:entity3 withSection:[LimitListSection class]];
     QUEntity* empty=[QUEntity entityWithLineTop:QU_FLAT_COLOR_LINE lineBottom:nil];
    [self.pAdaptor.pSources addEntity:empty withSection:[SetEmptyListSection class]];
    [self.pAdaptor notifyChanged];

}

-(void)QUAdaptor:(QUAdaptor *)adaptor forSection:(QUSection *)section forEntity:(QUEntity *)entity{
    if ([entity isKindOfClass:[SetListEntity class]]) {
        SetListEntity* e = (SetListEntity*)entity;
        LimitListSection* s = (LimitListSection*)section;
        s.lblName.text = e.sectionList;
        s.lblValue.hidden = YES;
    }
}

-(void)QUAdaptor:(QUAdaptor *)adaptor selectedSection:(QUSection *)section entity:(QUEntity *)entity{
    if ([entity isKindOfClass:[SetListEntity class]]) {
        SetListEntity* e = (SetListEntity*)entity;

        if (e.tag == 1) {
            [self goToStrategy];
        }
        if (e.tag == 2) {
            
            StrategyCooperationViewController *controller = [[StrategyCooperationViewController alloc] initWithNibName:@"StrategyCooperationViewController" bundle:nil];
            
            [self.navigationController pushViewController:controller animated:YES];
        }
        if (e.tag == 3) {
            [self gotoPrivate];
        }
    }
}

//-(void)gotoIntroduction{
//
//    IntroViewController* controller = [[IntroViewController alloc]initWithNibName:@"IntroViewController" bundle:nil];
//    [self.navigationController pushViewController:controller animated:YES];
//}


-(void)gotoPrivate{
    MyWebViewController* controller = [[MyWebViewController alloc]initWithNibName:@"MyWebViewController" bundle:nil];
    controller.url = [NSString stringWithFormat:@"%@/agreement/getPrivacyPolicy",[ConfigManager shareConfigManager].h5Url];
    controller.title = @"隐私条款";
    [self.navigationController pushViewController:controller animated:YES];
}

- (void)goToStrategy{
    MyWebViewController *controller = [[MyWebViewController alloc] initWithNibName:@"MyWebViewController" bundle:nil];
    controller.url = [NSString stringWithFormat:@"%@/agreement/getServiceAgreementInfo", [ConfigManager shareConfigManager].h5Url];
    controller.title = @"平台服务协议";
    [self.navigationController pushViewController:controller animated:YES];
}

//- (void)goToPlatformService{
//
//    MyWebViewController *controller = [[MyWebViewController alloc] initWithNibName:@"MyWebViewController" bundle:nil];
//    controller.url = @"www.baidu.com";
//    [self.navigationController pushViewController:controller animated:YES];
//}

/*
#pragma mark - Navigation

// In a storyboard-based application, you will often want to do a little preparation before navigation
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    // Get the new view controller using [segue destinationViewController].
    // Pass the selected object to the new view controller.
}
*/

@end
