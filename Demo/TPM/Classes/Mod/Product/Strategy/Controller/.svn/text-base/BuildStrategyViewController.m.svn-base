//
//  BuildStrategyViewController.m
//  TPM
//
//  Created by admin on 16/7/28.
//  Copyright © 2016年 JYZD. All rights reserved.
//

#import "BuildStrategyViewController.h"
#import "BuildRepositoryStrategyBll.h"
#import "UIBarButtonItem+YL.h"
#import "UIImage+ImageEffects.h"


@interface BuildStrategyViewController ()

@property (nonatomic, strong) BuildRepositoryStrategyBll *buildRepositoryBll;

@end

@implementation BuildStrategyViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    self.title = @"建仓策略";
    //self.buildRepositoryBll = [BuildRepositoryStrategyBll bllWithController:self tableView:self.fillTable];
    self.buildRepositoryBll = [BuildRepositoryStrategyBll bllWithController:self tableView:self.fillTable entity:self.buyEntity];
    
    [self.confirmSendBtn addTarget:self.buildRepositoryBll action:@selector(keyBoardConfirm) forControlEvents:UIControlEventTouchUpInside];
    [self disableConfirmBtn];
    
    self.statusBarStyle = UIStatusBarStyleLightContent;
    UINavigationBar * bar = [UINavigationBar appearance];
    [bar setBackgroundImage:[UIImage imageWithColor:kNavDetailBgColor]
             forBarPosition:UIBarPositionAny
                 barMetrics:UIBarMetricsDefault];
    [bar setShadowImage:[UIImage new]];
    //
    [self.navigationController.navigationBar setBackgroundColor:kNavBgColor];
    
}


-(void)doBack:(id)obj{
    self.statusBarStyle = UIStatusBarStyleDefault;
    UINavigationBar * bar = [UINavigationBar appearance];
    [bar setBackgroundImage:nil forBarPosition:UIBarPositionAny barMetrics:UIBarMetricsDefault];
    [bar setShadowImage:nil];
    //NavgationBar字体变白
    [self.navigationController.navigationBar setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:kTitleColor,NSForegroundColorAttributeName,[UIFont systemFontOfSize:16.f],NSFontAttributeName,nil]];
    self.navigationItem.leftBarButtonItem = [UIBarButtonItem buttonItemWithIcon:@"back_gray" highlightedIcon:@"back_gray" target:self action:@selector(doBack:)];
    [super doBack:obj];
}

-(void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];
    
    //NavgationBar字体变白
    [self.navigationController.navigationBar setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:[UIColor whiteColor],NSForegroundColorAttributeName,[UIFont systemFontOfSize:16.f],NSFontAttributeName,nil]];
    self.navigationItem.leftBarButtonItem = [UIBarButtonItem buttonItemWithIcon:@"back_white" highlightedIcon:@"back_white" target:self action:@selector(doBack:)];
}

-(void)disableConfirmBtn{
    self.confirmSendBtn.enabled = NO;
    [self.confirmSendBtn setBackgroundColor:kBtnDisableColor];
    [self.confirmSendBtn setTitleColor:kBtnTextDisableColor forState:UIControlStateDisabled];
}

-(void)enableConfirmBtn{
    self.confirmSendBtn.enabled = YES;
    [self.confirmSendBtn setBackgroundColor:kBtnColor];
    [self.confirmSendBtn setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
}

-(BOOL)isConfirmBtnEnable{
    return self.confirmSendBtn.enabled;
}



- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

/*
#pragma mark - Navigation

// In a storyboard-based application, you will often want to do a little preparation before navigation
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    // Get the new view controller using [segue destinationViewController].
    // Pass the selected object to the new view controller.
}
*/

@end
