//
//  SellStrategyViewController.m
//  TPM
//
//  Created by admin on 16/7/28.
//  Copyright © 2016年 JYZD. All rights reserved.
//

#import "SellStrategyViewController.h"
#import "SellRepositoryStrategyBll.h"
#import "UIBarButtonItem+YL.h"
#import "UIImage+ImageEffects.h"

@interface SellStrategyViewController ()

@property (nonatomic, strong) SellRepositoryStrategyBll *sellRepositoryBll;

@end

@implementation SellStrategyViewController

+(instancetype)controllerWithEntity:(SellingListRecordsEntity*)sellingEntity{
    SellStrategyViewController * c = [self controller];
    c.sellingEntity = sellingEntity;
    return c;
}

- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    self.title = @"平仓策略";
    self.sellRepositoryBll = [SellRepositoryStrategyBll bllWithController:self tableView:self.fillTable entity:self.sellingEntity];
    self.confirmSendBtn.layer.cornerRadius = 3;
    [self disableConfirmBtn];
    
    self.statusBarStyle = UIStatusBarStyleLightContent;
    UINavigationBar * bar = [UINavigationBar appearance];
    [bar setBackgroundImage:[UIImage imageWithColor:kNavDetailBgColor]
             forBarPosition:UIBarPositionAny
                 barMetrics:UIBarMetricsDefault];
    [bar setShadowImage:[UIImage new]];

}

-(void)doBack:(id)obj{
    self.statusBarStyle = UIStatusBarStyleDefault;
    UINavigationBar * bar = [UINavigationBar appearance];
    [bar setBackgroundImage:nil forBarPosition:UIBarPositionAny barMetrics:UIBarMetricsDefault];
    [bar setShadowImage:nil];
    //NavgationBar字体变白
    [self.navigationController.navigationBar setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:kTitleColor,NSForegroundColorAttributeName,[UIFont systemFontOfSize:16.f],NSFontAttributeName,nil]];
    self.navigationItem.leftBarButtonItem = [UIBarButtonItem buttonItemWithIcon:@"back_gray" highlightedIcon:@"back_gray" target:self action:@selector(doBack:)];
    [super doBack:obj];
}

-(void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];

    //NavgationBar字体变白
    [self.navigationController.navigationBar setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:[UIColor whiteColor],NSForegroundColorAttributeName,[UIFont systemFontOfSize:16.f],NSFontAttributeName,nil]];
    self.navigationItem.leftBarButtonItem = [UIBarButtonItem buttonItemWithIcon:@"back_white" highlightedIcon:@"back_white" target:self action:@selector(doBack:)];
}

-(void)viewDidDisappear:(BOOL)animated{
    [super viewDidDisappear:animated];
}



- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
    
}

/*
#pragma mark - Navigation

// In a storyboard-based application, you will often want to do a little preparation before navigation
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    // Get the new view controller using [segue destinationViewController].
    // Pass the selected object to the new view controller.
}
*/


-(void)disableConfirmBtn{
    self.confirmSendBtn.enabled = NO;
    [self.confirmSendBtn setBackgroundColor:kBtnDisableColor];
    [self.confirmSendBtn setTitleColor:kBtnTextDisableColor forState:UIControlStateDisabled];
}

-(void)enableConfirmBtn{
    self.confirmSendBtn.enabled = YES;
    [self.confirmSendBtn setBackgroundColor:kBtnColor];
    [self.confirmSendBtn setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
}

-(BOOL)isConfirmBtnEnable{
    return self.confirmSendBtn.enabled;
}


@end
