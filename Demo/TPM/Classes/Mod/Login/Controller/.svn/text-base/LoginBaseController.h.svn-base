//
//  LoginBaseController.h
//  QianFangGuJie
//
//  Created by kinghy on 15/4/4.
//  Copyright (c) 2015年 余龙. All rights reserved.
//

#import <UIKit/UIKit.h>
#import "EFTextField.h"
#import "GestureVC.h"

@class checkPicEntity;
@class LoginEntity;
@class UserInfoManager;

typedef enum
{
    kMobileTextFieldTag = 10987,    // 手机号输入框
    kPayPswTextFieldTag = 2970,    // 支付密码输入框
    kIdentifyTextFieldTag = 10010   //验证码输入框
} TextFieldTag;

@interface LoginBaseController : AppViewController<UITextFieldDelegate>

@property(strong,nonatomic)UserInfoManager* userinfomanager;

@property (weak, nonatomic) IBOutlet UIButton *forgetBtn;

@property(strong,nonatomic)NSString* mobileNumberString;    //保存的手机号
@property(strong,nonatomic)NSString* mobilePasswordString;   //保存的密码

@property (strong, nonatomic) IBOutlet QUPhoneTextField *phoneNum;       //输入的手机号
@property (strong, nonatomic) IBOutlet EFTextField *password;       //输入的密码
@property (strong, nonatomic) IBOutlet EFTextField *identifyCode;   //验证码
@property (strong, nonatomic) IBOutlet UIImageView *identifyImage;  //验证码图片
@property(strong,nonatomic)UIImage* img;
//@property (strong, nonatomic) IBOutlet UIButton *displayMobileButton;//显示下拉列表按钮
//- (IBAction)clickDisplay:(id)sender;//显示手机下拉框
@property (strong, nonatomic) IBOutlet UIButton *loginButton;         //登陆
@property(weak,nonatomic)id<PasswordViewControllerDelegate> pwdDelegate;

@property (weak, nonatomic) IBOutlet UIButton *backBtn;


@property(strong,nonatomic)NSString* uid;       //登录返回的uid


- (void)refreshImage:(id)sender;

- (NSString*)checkLoginValidate;  //检查手机号和密码以及验证编码,无错误就返回nil

-(void)getNewPic;//获取验证码

-(void)initTextField;//初始化输入框

- (IBAction)forgetClicked:(id)sender;//忘记密码

//后退
- (IBAction)doBack:(id)sender;

-(void)resignAllTextFieldFirstResponder;//取消所有输入框的键盘显示
- (IBAction)clickLoginButton:(id)sender ;//点击登录按钮
-(void)LoginSuccess:(LoginEntity*)e;//登录成功处理方法，默认什么都不做，由子类实现
-(void)LoginSuccessShowWithIndexController;//登陆成功后显示index

@property (weak, nonatomic) IBOutlet UIView *phoneView;
@property (weak, nonatomic) IBOutlet UIView *pwdView;
@property (weak, nonatomic) IBOutlet UIView *viewIdentify;
@property (weak, nonatomic) IBOutlet UIView *verifyView;
@property (strong, nonatomic) UIView *maskView;

@property (weak, nonatomic) IBOutlet UIView *cpbView;
@property (weak, nonatomic) IBOutlet UIView *bottomView;
@property (weak, nonatomic) IBOutlet UIView *middleView;

@property(strong,nonatomic)checkPicEntity* myCheckPicEntity;    //验证码entity
- (IBAction)phoneLoginClicked:(id)sender;
- (IBAction)cpbLoginClicked:(id)sender;
- (IBAction)gotoCpbLogin:(id)sender;
- (IBAction)gotoCpbRegister:(id)sender;


- (void)goBack;
- (void)gotoRegister;

@end
